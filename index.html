<meta name='viewport' content='width=device-width, initial-scale=1'/>name="viewport" content="width=device-width,initial-scale=1">
<title>Lock AES</title>

<style>
body{
  margin:0;
  font-family:system-ui,Segoe UI,Roboto,Arial;
  background:#0f172a;
  color:#e5e7eb;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
}
.app{
  width:100%;
  max-width:420px;
  background:#020617;
  border-radius:18px;
  padding:16px;
  box-shadow:0 20px 50px rgba(0,0,0,.6);
  position:relative;
}
h1{
  margin:0 0 10px;
  font-size:18px;
  text-align:center;
}
.tabs{
  display:flex;
  gap:6px;
  margin-bottom:12px;
}
.tabs button{
  flex:1;
  padding:10px;
  border-radius:12px;
  border:none;
  background:#020617;
  color:#94a3b8;
  font-weight:700;
}
.tabs button.active{
  background:#2563eb;
  color:#fff;
}
textarea,input{
  width:100%;
  background:#020617;
  color:#fff;
  border:1px solid #1e293b;
  border-radius:12px;
  padding:10px;
  margin-bottom:10px;
  font-size:14px;
}
textarea{min-height:120px}
button.main{
  width:100%;
  padding:12px;
  border:none;
  border-radius:14px;
  background:#2563eb;
  color:#fff;
  font-weight:800;
  margin-bottom:10px;
}
.output{
  background:#020617;
  border:1px dashed #2563eb;
  border-radius:12px;
  padding:10px;
  font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size:12px;
  word-break:break-word;
  min-height:18px;
}
.status{
  margin-top:8px;
  font-size:13px;
  font-weight:700;
}
.ok{color:#22c55e}
.err{color:#ef4444}

/* --- Telegram FAB + panel (no afecta el cifrado) --- */
.tg-fab{
  position:fixed;
  right:16px;
  bottom:16px;
  z-index:9999;
  width:56px;
  height:56px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(2,6,23,.85);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow:0 14px 40px rgba(0,0,0,.55);
  cursor:pointer;
  user-select:none;
  -webkit-tap-highlight-color: transparent;
  transition: transform .15s ease;
}
.tg-fab:active{ transform: scale(.96); }
.tg-fab svg{ width:26px; height:26px; display:block; }

.tg-panel{
  position:fixed;
  right:16px;
  bottom:84px;
  z-index:9999;
  width:min(320px, calc(100vw - 32px));
  background:rgba(2,6,23,.92);
  border:1px solid rgba(148,163,184,.18);
  border-radius:16px;
  box-shadow:0 22px 60px rgba(0,0,0,.6);
  overflow:hidden;
  transform-origin: bottom right;
  transform: translateY(10px) scale(.98);
  opacity:0;
  pointer-events:none;
  transition: opacity .18s ease, transform .18s ease;
}
.tg-panel.open{
  opacity:1;
  transform: translateY(0) scale(1);
  pointer-events:auto;
}
.tg-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:12px 12px 10px;
  border-bottom:1px solid rgba(148,163,184,.14);
}
.tg-title{
  display:flex;
  gap:10px;
  align-items:center;
  font-weight:800;
  color:#e5e7eb;
  font-size:14px;
}
.tg-close{
  background:transparent;
  border:none;
  color:#94a3b8;
  font-size:18px;
  padding:6px 10px;
  border-radius:12px;
}
.tg-close:active{ background:rgba(148,163,184,.12); }
.tg-list{ padding:8px; }
.tg-item{
  width:100%;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding:12px 12px;
  margin:6px 0;
  background:rgba(15,23,42,.55);
  border:1px solid rgba(148,163,184,.16);
  border-radius:14px;
  color:#e5e7eb;
  font-weight:800;
  text-align:left;
}
.tg-item small{
  font-weight:700;
  color:#94a3b8;
}
.tg-item:active{ transform: scale(.99); }
.tg-note{
  padding:10px 12px 12px;
  color:#94a3b8;
  font-size:12px;
  line-height:1.3;
}

/* FIX ICON CUTTING - safe override */
#tgFab, .tg-fab {
  overflow: visible !important;
  padding: 0 !important;
}
#tgFab svg, .tg-fab svg {
  width: 30px !important;
  height: 30px !important;
  display: block !important;
}

</style>
</head>

<body>
<div class="app">
<h1>üîê Lock AES</h1>

<div class="tabs">
  <button id="tEnc" class="active" type="button">Encrypt</button>
  <button id="tDec" type="button">Decrypt</button>
</div>

<div id="enc">
  <textarea id="encText" placeholder="Texto"></textarea>
  <input id="encPass" type="password" placeholder="Clave" autocomplete="current-password">
  <button class="main" type="button" onclick="encrypt()">Encrypt</button>
  <div class="output" id="encOut"></div>
  <div class="status" id="encStatus"></div>
</div>

<div id="dec" style="display:none">
  <textarea id="decPack" placeholder="Paquete LOCK1..."></textarea>
  <input id="decPass" type="password" placeholder="Clave" autocomplete="current-password">
  <button class="main" type="button" onclick="decrypt()">Decrypt</button>
  <div class="output" id="decOut"></div>
  <div class="status" id="decStatus"></div>
</div>
</div>

<!-- Telegram -->
<div id="tgPanel" class="tg-panel" aria-hidden="true">
  <div class="tg-head">
    <div class="tg-title">
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path fill="#2AABEE" d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2z"/>
        <path fill="#fff" d="M17.47 7.35c.16-.72-.55-.99-1.12-.78L6.7 10.3c-.67.26-.66.65-.12.82l2.47.77 5.72-3.6c.27-.17.52-.08.32.1l-4.64 4.18-.17 2.55c.25 0 .36-.12.5-.27l1.2-1.16 2.5 1.84c.46.25.8.12.92-.43l1.6-7.78z"/>
      </svg>
      Telegram
    </div>
    <button class="tg-close" type="button" aria-label="Cerrar" onclick="toggleTG(false)">‚úï</button>
  </div>

  
  <div class="tg-list">
    <button class="tg-item" type="button" onclick="openTG('https://t.me/forzagrupo')">
      <div>
        Forza<br><small>@forzagrupo</small>
      </div>
      <span>‚Üó</span>
    </button>

    <button class="tg-item" type="button" onclick="openTG('https://t.me/confiesatehoy1')">
      <div>
        Confiesate<br><small>@confiesatehoy1</small>
      </div>
      <span>‚Üó</span>
    </button>

    <button class="tg-item" type="button" onclick="openTG('https://t.me/+ypuHtkyJG7tmZWQx')">
      <div>
        APK N3XU5<br><small>Invite link</small>
      </div>
      <span>‚Üó</span>
    </button>

    <button class="tg-item" type="button" onclick="openTG('https://t.me/+SprIq73R1J1kZDJh')">
      <div>
        ALL FOR ONE<br><small>Invite link</small>
      </div>
      <span>‚Üó</span>
    </button>

    <button class="tg-item" type="button" onclick="openTG('https://t.me/binneerz2')">
      <div>
        Binneerz<br><small>@binneerz2</small>
      </div>
      <span>‚Üó</span>
    </button>

    <button class="tg-item" type="button" onclick="openTG('https://t.me/+0qw3nXYO7NA3NGNh')">
      <div>
        TIO-P3L1CULAS<br><small>Invite link</small>
      </div>
      <span>‚Üó</span>
    </button>
  </div>


  <div class="tg-note">Tip: si tienes Telegram instalado, al tocar un grupo normalmente se abre directo en la app.</div>
</div>

<button class="tg-fab" id="tgFab" type="button" aria-label="Abrir Telegram" onclick="toggleTG()">
  <!-- SVG Telegram icon -->
  <svg viewBox="0 0 24 24" aria-hidden="true">
    <path fill="#2AABEE" d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2z"/>
    <path fill="#fff" d="M17.47 7.35c.16-.72-.55-.99-1.12-.78L6.7 10.3c-.67.26-.66.65-.12.82l2.47.77 5.72-3.6c.27-.17.52-.08.32.1l-4.64 4.18-.17 2.55c.25 0 .36-.12.5-.27l1.2-1.16 2.5 1.84c.46.25.8.12.92-.43l1.6-7.78z"/>
  </svg>
</button>

<script>
const ITER=200000, VERSION="LOCK1";
const te=new TextEncoder(), td=new TextDecoder();

function rand(n){const a=new Uint8Array(n);crypto.getRandomValues(a);return a}
function b64u(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}
function u8(s){return new Uint8Array(atob(s.replace(/-/g,"+").replace(/_/g,"/")).split("").map(c=>c.charCodeAt(0)))}

async function keyFromPass(pass,salt){
  const k=await crypto.subtle.importKey("raw",te.encode(pass),"PBKDF2",false,["deriveKey"]);
  return crypto.subtle.deriveKey(
    {name:"PBKDF2",salt,iterations:ITER,hash:"SHA-256"},
    k,{name:"AES-GCM",length:256},false,["encrypt","decrypt"]
  );
}

async function encrypt(){
  encStatus.textContent="";
  if(!encText.value||!encPass.value){encStatus.textContent="Faltan datos";encStatus.className="status err";return}
  try{
    const salt=rand(16),iv=rand(12);
    const key=await keyFromPass(encPass.value,salt);
    const ct=await crypto.subtle.encrypt({name:"AES-GCM",iv},key,te.encode(encText.value));
    encOut.textContent=`${VERSION}.i=${ITER}.${b64u(salt)}.${b64u(iv)}.${b64u(new Uint8Array(ct))}`;
    encStatus.textContent="OK";
    encStatus.className="status ok";
  }catch{
    encStatus.textContent="Error";
    encStatus.className="status err";
  }
}

async function decrypt(){
  decStatus.textContent="";
  try{
    const parts=decPack.value.trim().split(".");
    if(parts.length!==5) throw 0;
    const [v,i,salt,iv,ct]=parts;
    if(v!==VERSION) throw 0;
    const key=await keyFromPass(decPass.value,u8(salt));
    const pt=await crypto.subtle.decrypt({name:"AES-GCM",iv:u8(iv)},key,u8(ct));
    decOut.textContent=td.decode(pt);
    decStatus.textContent="OK";
    decStatus.className="status ok";
  }catch{
    decStatus.textContent="Clave o paquete inv√°lido";
    decStatus.className="status err";
  }
}

tEnc.onclick=()=>{tEnc.classList.add("active");tDec.classList.remove("active");enc.style.display="";dec.style.display="none"}
tDec.onclick=()=>{tDec.classList.add("active");tEnc.classList.remove("active");dec.style.display="";enc.style.display="none"}

/* Telegram panel logic */
function toggleTG(force){
  const p=document.getElementById("tgPanel");
  const open = (typeof force==="boolean") ? force : !p.classList.contains("open");
  p.classList.toggle("open", open);
  p.setAttribute("aria-hidden", open ? "false" : "true");
}
function openTG(url){
  // WebView-safe: use HTTPS only and open externally
  try{
    if(typeof url !== "string") return;
    url = url.trim();

    if(url.startsWith("@")) url = "https://t.me/" + url.slice(1);

    if(url.startsWith("https://t.me/")){
      const m = url.match(/domain=([^&]+)/);
      if(m && m[1]) url = "https://t.me/" + m[1];
      else url = "https://t.me/";
    }

    if(!/^https?:\/\//i.test(url)) url = "https://t.me/" + url.replace(/^\/+/, "");

    window.open(url, "_blank");
  }catch(e){
    location.href = url;
  }
}
document.addEventListener("click",(e)=>{
  const p=document.getElementById("tgPanel");
  const fab=document.getElementById("tgFab");
  if(!p.classList.contains("open")) return;
  if(p.contains(e.target) || fab.contains(e.target)) return;
  toggleTG(false);
});
</script>
</body>
</html>
